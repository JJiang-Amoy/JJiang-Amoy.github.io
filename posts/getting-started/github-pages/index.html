<!doctype html><html><head><title>Deploy site in Github Pages</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600"><link rel=stylesheet href=/fontawesome/css/all.min.css><link rel=icon type=image/png href=/images/site/favicon_hub02d7508a1c89b2b7812eab204efeb9a_4223_42x0_resize_box_2.png><meta property="og:title" content="Deploy site in Github Pages"><meta property="og:description" content="In this post, we are going to deploy the site we have created in previous post in Github Pages. At first, make sure that your repository name is <your username>.github.io. Then, commit any local uncommitted changes and push into Github.
Setup Default Branch GitHub don&rsquo;t serve a site from hugo templates directly. Instead, we have to provide the generated (HTML, CSS, JS etc.) files after building the site. From now, we are going to maintain two branches for our site."><meta property="og:type" content="article"><meta property="og:url" content="https://jjiang-amoy.github.io/posts/getting-started/github-pages/"><meta property="article:published_time" content="2020-06-08T22:00:20+06:00"><meta property="article:modified_time" content="2020-06-08T22:00:20+06:00"><meta name=description content="Deploy site in Github Pages"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css><link rel=stylesheet href=/css/style.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','G-H4LBG7NDFZ','auto');ga('send','pageview');}</script></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/site/main-logo_hu9ad2f25a877e6fef77c7a3dbef5094ad_6881_42x0_resize_box_2.png alt=Logo>
Jian Jiang's website under construction</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/images/site/main-logo_hu9ad2f25a877e6fef77c7a3dbef5094ad_6881_42x0_resize_box_2.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/inverted-logo_hub02d7508a1c89b2b7812eab204efeb9a_4223_42x0_resize_box_2.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><a href=/posts/features/ title=Features>Features</a></li><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/getting-started/>Getting Started</a><ul class=active><li><a href=/posts/getting-started/prepare-site/ title="Prepare Site">Prepare Site</a></li><li><a class=active href=/posts/getting-started/github-pages/ title="Deploy in Github Pages">Deploy in Github Pages</a></li><li><a href=/posts/getting-started/netlify/ title="Deploy in Netlify">Deploy in Netlify</a></li><li><a href=/posts/getting-started/theme-update/ title="Automate Theme Update">Automate Theme Update</a></li></ul></li><li><a href=/contact/asd/ title=Introduction>Introduction</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/category/>Category</a><ul><li><i class="fas fa-plus-circle"></i><a href=/posts/category/sub-category/>Sub-Category</a><ul><li><a href=/posts/category/sub-category/rich-content/ title="Rich Content">Rich Content</a></li></ul></li></ul></li><li><a href=/posts/markdown-sample/ title="Markdown Sample">Markdown Sample</a></li><li><a href=/posts/publications/ title=Publications>Publications</a></li><li><a href=/posts/group-member/ title="Group Members">Group Members</a></li><li><a href=/posts/shortcodes/ title="Shortcodes Sample">Shortcodes Sample</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/configuration/>Configuration</a><ul><li><a href=/posts/configuration/site-parameters/ title="Site Parameters">Site Parameters</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/configuration/sections/>Sections</a><ul><li><a href=/posts/configuration/sections/about/ title="About Section">About Section</a></li><li><a href=/posts/configuration/sections/skills/ title="Skills Section">Skills Section</a></li><li><a href=/posts/configuration/sections/experiences/ title="Experiences Section">Experiences Section</a></li><li><a href=/posts/configuration/sections/education/ title="Education Section">Education Section</a></li><li><a href=/posts/configuration/sections/projects/ title="Projects Section">Projects Section</a></li><li><a href=/posts/configuration/sections/recent-posts/ title="Recent Posts Section">Recent Posts Section</a></li><li><a href=/posts/configuration/sections/achievements/ title="Achievements Section">Achievements Section</a></li></ul></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/writing-posts/>Writing Posts</a><ul><li><i class="fas fa-plus-circle"></i><a href=/posts/writing-posts/organizing/>Organizing Posts</a><ul><li><a href=/posts/writing-posts/organizing/category/ title="Creating Category">Creating Category</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/writing-posts/organizing/sub-category/>Sub-Category</a><ul><li><a href=/posts/writing-posts/organizing/sub-category/example/ title="Creating Sub-Category">Creating Sub-Category</a></li></ul></li></ul></li><li><a href=/posts/writing-posts/front-matter/ title="Front Matter">Front Matter</a></li><li><a href=/posts/writing-posts/markdown-syntax/ title="Markdown Guide">Markdown Guide</a></li><li><a href=/posts/writing-posts/math/ title="Math Guide">Math Guide</a></li><li><a href=/posts/writing-posts/rich-content/ title="Rich Content">Rich Content</a></li><li><a href=/posts/writing-posts/mermaid/ title=Mermaid>Mermaid</a></li><li><a href=/posts/writing-posts/using-emoji/ title="Using Emoji">Using Emoji</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/customizing/>Customizing</a><ul><li><a href=/posts/customizing/new-section/ title="Adding New Section">Adding New Section</a></li><li><a href=/posts/customizing/customize-layout/ title="Layout Customization">Layout Customization</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/translation/>Translation</a><ul><li><a href=/posts/translation/site-data/ title="Translating Homepage">Translating Homepage</a></li><li><a href=/posts/translation/content/ title="Translating Posts">Translating Posts</a></li></ul></li><li><a href=/posts/analytics/ title=Analytics>Analytics</a></li><li><a href=/posts/comments/ title=Comments>Comments</a></li><li><a href=/posts/supports/ title="Support Links">Support Links</a></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://jjiang-amoy.github.io/posts/getting-started/github-pages/hero.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/john_hu7f9991f5b5d471ecdfc6cff3db1a9fe6_6397_120x120_fit_box_2.png alt="Author Image"><h5 class=author-name>Jian Jiang</h5><p>:date_full</p></div><div class=title><h1>Deploy site in Github Pages</h1></div><div class=taxonomy-terms><ul></ul></div><div class=post-content id=post-content><p>In this post, we are going to deploy the site we have created in previous post in <a href=https://pages.github.com/>Github Pages</a>. At first, make sure that your repository name is <code>&lt;your username>.github.io</code>. Then, commit any local uncommitted changes and push into Github.</p><h4 id=setup-default-branch>Setup Default Branch</h4><p>GitHub don&rsquo;t serve a site from hugo templates directly. Instead, we have to provide the generated (HTML, CSS, JS etc.) files after building the site. From now, we are going to maintain two branches for our site. The <code>main</code> (previously known as <code>master</code>) branch will hold the generated contents after building the site. Github will serve the site from this branch. We will create another branch named <code>source</code>. This will hold our markdowns files and hugo templates.</p><p>Let&rsquo;s create the <code>source</code> branch <code>main</code> branch and push it into Github.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># create the source branch</span>
$ git checkout -b source
<span style=color:#75715e># push the source branch into Github</span>
$ git push origin source
</code></pre></div><p>Now, we are going to set the <code>source</code> branch as our default branch. Go to <code>Settings > Branches</code> of your repository and replace <code>main</code> with <code>source</code> under <code>Default branch</code> section. Then, save the change by clicking <code>Update</code> button. A screenshot of the process is shown below:</p><img src=images/set_default_branch.png class=center><p><div style=margin-top:2rem></div>Going forward, all our developments will happen against this <code>source</code> branch.</p><h4 id=set-github-pages-branch>Set Github Pages Branch</h4><p>Now, we have to tell Github which branch we are using for holding generated contents. Go to the <code>Settings</code> of your repository. Scroll down until you find <code>Github Pages</code> section. Select <code>main</code> branch and <code>/(root)</code> directory under <code>Source</code> section.</p><img src=images/github_pages_branch.png class=center><h4 id=enable-github-action>Enable Github Action</h4><p>We are going to automate the deploying process using <a href=https://github.com/features/actions>Github Actions</a>. At first, make sure that Github Action is enabled in your repository. Go to <code>Settings > Actions</code> of your repository and make sure <code>Action permissions</code> is set to <code>Allow all actions</code>. Here, is a screenshot of the respective setting:</p><img src=images/enable_action.png class=center><h4 id=add-workflow>Add Workflow</h4><p>We are going to use <a href=https://github.com/peaceiris/actions-hugo>peaceiris/actions-hugo</a> action to set up hugo and <a href=https://github.com/peaceiris/actions-gh-pages>peaceiris/actions-gh-pages</a> to deploy the site. Create <code>.github</code> folder at the root of your repository. Then, create <code>workflows</code> folder inside the <code>.github</code> folder. Finally, create a <code>deploy-site.yaml</code> file inside the <code>workflows</code> folder and add the following content there:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy to Github Pages</span>

<span style=color:#75715e># run when a commit is pushed to &#34;source&#34; branch</span>
<span style=color:#f92672>on</span>:
  <span style=color:#f92672>push</span>:
    <span style=color:#f92672>branches</span>:
    - <span style=color:#ae81ff>source</span>

<span style=color:#f92672>jobs</span>:
  <span style=color:#f92672>deploy</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-18.04</span>
    <span style=color:#f92672>steps</span>:
    <span style=color:#75715e># checkout to the commit that has been pushed</span>
    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
      <span style=color:#f92672>with</span>:
        <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Fetch Hugo themes (true OR recursive)</span>
        <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>    <span style=color:#75715e># Fetch all history for .GitInfo and .Lastmod</span>
    
    <span style=color:#75715e># install Hugo</span>
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2</span>
      <span style=color:#f92672>with</span>:
        <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;0.77.0&#39;</span>
        <span style=color:#f92672>extended</span>: <span style=color:#66d9ef>true</span>

    <span style=color:#75715e># build website</span>
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
      <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>

    <span style=color:#75715e># push the generated content into the `main` (former `master`) branch.</span>
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
      <span style=color:#f92672>with</span>:
        <span style=color:#f92672>github_token</span>: <span style=color:#ae81ff>${{ secrets.GITHUB_TOKEN }}</span>
        <span style=color:#f92672>publish_branch</span>: <span style=color:#ae81ff>main</span> <span style=color:#75715e># if your main branch is `master` use that here.</span>
        <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>
</code></pre></div><p>This action will start on every push into the <code>source</code> branch. It will build the site and commit the generated content into <code>main</code> branch.</p><h4 id=deploy>Deploy</h4><p>If you have followed the guide properly, your site should be ready to deploy in Github Pages. Now, if you push any commit into your <code>source</code> branch, a Github Action will start and deploy your site automatically.</p><p>Push a commit into the <code>source</code> branch and go to <code>Actions</code> tab of your repository to verify that the action has started.</p><img src=images/action_running.png class=center><div style=margin-top:2rem></div><p>Now, wait for the actions to complete. If it completes successfully, you should see a green tick indicating successful run.</p><img src=images/action_completed.png class=center><div style=margin-top:2rem></div><p>Once the Github Action has completed successfully, you can browse your site at <code>https://&lt;your username>.github.io</code>.</p><img src=images/site_deployed.png class=center></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn btn-sm facebook-btn" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fjjiang-amoy.github.io%2fposts%2fgetting-started%2fgithub-pages%2f" target=_blank><i class="fab fa-facebook"></i></a><a class="btn btn-sm twitter-btn" href="https://twitter.com/share?url=https%3a%2f%2fjjiang-amoy.github.io%2fposts%2fgetting-started%2fgithub-pages%2f&text=Deploy%20site%20in%20Github%20Pages&via=Jian%20Jiang%27s%20website%20under%20construction" target=_blank><i class="fab fa-twitter"></i></a><a class="btn btn-sm reddit-btn" href="https://reddit.com/submit?url=https%3a%2f%2fjjiang-amoy.github.io%2fposts%2fgetting-started%2fgithub-pages%2f&title=Deploy%20site%20in%20Github%20Pages" target=_blank><i class="fab fa-reddit"></i></a><a class="btn btn-sm linkedin-btn" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fjjiang-amoy.github.io%2fposts%2fgetting-started%2fgithub-pages%2f&title=Deploy%20site%20in%20Github%20Pages" target=_blank><i class="fab fa-linkedin"></i></a><a class="btn btn-sm whatsapp-btn" href="https://api.whatsapp.com/send?text=Deploy%20site%20in%20Github%20Pages https%3a%2f%2fjjiang-amoy.github.io%2fposts%2fgetting-started%2fgithub-pages%2f" target=_blank><i class="fab fa-whatsapp"></i></a><a class="btn btn-sm email-btn" href="mailto:?subject=Deploy%20site%20in%20Github%20Pages&body=https%3a%2f%2fjjiang-amoy.github.io%2fposts%2fgetting-started%2fgithub-pages%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/hugo-toha/hugo-toha.github.io/edit/source/content/posts/getting-started/github-pages/index.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>Improve this page</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/getting-started/prepare-site/ title="Prepare Your Site" class="btn btn-outline-info"><div><i class="fas fa-chevron-circle-left"></i>Prev</div><div class=next-prev-text>Prepare Your Site</div></a></div><div class="col-md-6 next-article"><a href=/posts/getting-started/netlify/ title="Deploy site in Netlify" class="btn btn-outline-info"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Deploy site in Netlify</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#setup-default-branch>Setup Default Branch</a></li><li><a href=#set-github-pages-branch>Set Github Pages Branch</a></li><li><a href=#enable-github-action>Enable Github Action</a></li><li><a href=#add-workflow>Add Workflow</a></li><li><a href=#deploy>Deploy</a></li></ul></li></ul></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://jjiang-amoy.github.io#about>About</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:jian.jacky.jiang@gmail.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span><span>jian.jacky.jiang@gmail.com</span></a></li><li><a href=https://github.com/jjiang-amoy target=_blank rel=noopener><span><i class="fab fa-github"></i></span><span>jjiang-amoy</span></a></li><li><span><i class="fas fa-phone-alt"></i></span><span>+0123456789</span></li></ul></div></div></div><hr><div class=container><p id=disclaimer><strong>Liability Notice:</strong> This theme is under MIT license. So, you can use it for non-commercial, commercial, or private uses. You can modify or distribute the theme without requiring any permission from the theme author. However, the theme author does not provide any warranty or takes any liability for any issue with the theme.</p></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_2.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">Â© 2020 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script><script type=text/javascript src=/js/popper.min.js></script><script type=text/javascript src=/js/bootstrap.min.js></script><script type=text/javascript src=/js/navbar.js></script><script type=text/javascript src=/js/plyr.js></script><script type=text/javascript src=/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script><script src=/js/single.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>